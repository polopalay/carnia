on_death_relation_slave = {
	effect = {
		remove_relation_slave = scope:target
		primary_heir = {
			save_scope_as = new_owner
			set_relation_slave = scope:target
		}
		if = {
			limit = { NOT = { exists = scope:new_owner } }
			scope:target.liege = {
				save_scope_as = new_owner
				set_relation_slave = scope:target
			}
		}
		scope:target = {
			set_relation_slave_owner = new_owner
		}
	}
}


on_birth_child = {
	events = {
		carn_slave.0003
	}
}

on_title_gain = {
	events = {
		carn_slave.0002
	}
}

on_join_court = {
	trigger = { is_ruler = no has_trait = slave has_relation_slave_owner = scope:old_employer }
	effect = { scope:old_employer = { add_courtier = root } }
}

on_yearly_playable = {
	trigger = {
		is_ruler = yes
		any_relation = {
			type = slave
			NOT = { is_courtier_of = root }
		}
	}
	effect = {
		every_relation = {
			type = slave
			limit = { NOT = { is_courtier_of = root } }
			root = {
				add_courtier = prev
			}
		}
	}
}

five_year_everyone_pulse = {
	trigger = {
		is_ruler = no
		has_trait = slave
		any_relation = {
			is_ruler = no
			type = slave_owner
			count = 0
		}
	}
	effect = {
		random_ruler = {
			carn_enslave_effect = { SLAVE = root OWNER = this DRAMA = no }
			weight = {
				base = 1
				modifier = { root.liege = this add = 10000 }
			}
		}
	}
}
